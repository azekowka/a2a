# üöÄ –ú—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–∞—è –°–∏—Å—Ç–µ–º–∞: LangChain & PydanticAI (A2A –ü—Ä–æ—Ç–æ–∫–æ–ª)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–æ–ø–µ—Ä–∞–±–µ–ª—å–Ω–æ–π –º—É–ª—å—Ç–∏–∞–≥–µ–Ω—Ç–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã, –≥–¥–µ –¥–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∞–≥–µ–Ω—Ç–∞, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö (LangChain –∏ PydanticAI), –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É Agent-to-Agent (A2A) —á–µ—Ä–µ–∑ HTTP API. –ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–∏ —Å–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–æ—â–Ω—ã–µ Large Language Models (LLMs) ‚Äì Google Gemini –∏ OpenAI GPT ‚Äì –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á.

## ‚ú® –û–±–∑–æ—Ä –ü—Ä–æ–µ–∫—Ç–∞

–¶–µ–ª—å —ç—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –º–æ–¥—É–ª—å–Ω—É—é, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É, –≥–¥–µ –∞–≥–µ–Ω—Ç—ã –º–æ–≥—É—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–∞—Ç—å:

*   **–ê–≥–µ–Ω—Ç LangChain:** –û—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø–µ—Ä–≤–∏—á–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ —Ä–µ–∑—é–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è –º–æ–¥–µ–ª—å **Google Gemini**.
*   **–ê–≥–µ–Ω—Ç PydanticAI:** –ü–æ–ª—É—á–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç LangChain –∞–≥–µ–Ω—Ç–∞, –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –∏—Ö, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∞–Ω–∞–ª–∏–∑ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π (—Å –ø–æ–º–æ—â—å—é `TextBlob`) –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–µ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ (—Å –ø–æ–º–æ—â—å—é –º–æ–¥–µ–ª–∏ **OpenAI GPT**).
*   **–ü—Ä–æ—Ç–æ–∫–æ–ª A2A (HTTP API):** –ê–≥–µ–Ω—Ç—ã –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–º–∏ –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º —á–µ—Ä–µ–∑ —á–µ—Ç–∫–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ HTTP-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É—è Pydantic-–º–æ–¥–µ–ª–∏ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö.

## üåü –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –°–∏—Å—Ç–µ–º—ã

```mermaid
graph TD
    A[–ö–ª–∏–µ–Ω—Ç] -->|HTTP POST –∑–∞–ø—Ä–æ—Å: "query"| B(LangChain Agent (–ø–æ—Ä—Ç 8000))
    B -->|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç: Google Gemini| C{–û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–ø—Ä–æ—Å–∞: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, –†–µ–∑—é–º–∏—Ä–æ–≤–∞–Ω–∏–µ}
    C -->|HTTP POST –∑–∞–ø—Ä–æ—Å: LangchainAgentOutput| D(PydanticAI Agent (–ø–æ—Ä—Ç 8001))
    D -->|–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è: Pydantic| E{–ê–Ω–∞–ª–∏–∑: Sentiment Analysis (TextBlob), –û–±–æ–≥–∞—â–µ–Ω–∏–µ: OpenAI GPT}
    E -->|HTTP –û—Ç–≤–µ—Ç: PydanticAIAgentOutput| B
    B -->|HTTP –û—Ç–≤–µ—Ç: LangchainAgentOutput| A
```

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

*   **–§—Ä–µ–π–º–≤–æ—Ä–∫–∏ –ê–≥–µ–Ω—Ç–æ–≤:**
    *   [**LangChain**](https://www.langchain.com/): –î–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏ LLMs, –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Ü–µ–ø–æ—á–µ–∫ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
    *   [**PydanticAI**](https://pydantic.dev/): –î–ª—è —Å—Ç—Ä–æ–≥–æ–π –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Å—Ö–µ–º –∏ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–∞–¥–µ–∂–Ω—ã—Ö API.
*   **LLMs:**
    *   **Google Gemini:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å LangChain –∞–≥–µ–Ω—Ç–æ–º.
    *   **OpenAI GPT:** –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ —Å PydanticAI –∞–≥–µ–Ω—Ç–æ–º.
*   **–í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∏:**
    *   [**FastAPI**](https://fastapi.tiangolo.com/): –î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö API-—Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞.
    *   [**Uvicorn**](https://www.uvicorn.org/): ASGI-—Å–µ—Ä–≤–µ—Ä –¥–ª—è –∑–∞–ø—É—Å–∫–∞ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
*   **HTTP-–∫–ª–∏–µ–Ω—Ç:**
    *   [**HTTPX**](https://www.python-httpx.org/): –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è A2A –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏.
*   **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
    *   [**TextBlob**](https://textblob.readthedocs.io/en/dev/): –î–ª—è –∞–Ω–∞–ª–∏–∑–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–π –≤ PydanticAI –∞–≥–µ–Ω—Ç–µ.
    *   `pydantic-settings`: –î–ª—è —É–¥–æ–±–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Ö–æ—Ç—è –≤ –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `os.environ`).

## üöÄ –ó–∞–ø—É—Å–∫ –ü—Ä–æ–µ–∫—Ç–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone <URL_–í–ê–®–ï–ì–û_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø>
cd a2a
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
# –ò–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤—Ä—É—á–Ω—É—é:
# pip install langchain google-generativeai pydantic fastapi uvicorn httpx textblob openai
```

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ API –ö–ª—é—á–µ–π

–î–ª—è —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞ –≤–∞–º –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è API –∫–ª—é—á–∏ –¥–ª—è Google Gemini –∏ OpenAI. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∏—Ö –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# –î–ª—è Linux/macOS
export GEMINI_API_KEY="–í–ê–®_–ö–õ–Æ–ß_GOOGLE_GEMINI"
export OPENAI_API_KEY="–í–ê–®_–ö–õ–Æ–ß_OPENAI"

# –î–ª—è Windows (CMD)
set GEMINI_API_KEY="–í–ê–®_–ö–õ–Æ–ß_GOOGLE_GEMINI"
set OPENAI_API_KEY="–í–ê–®_–ö–õ–Æ–ß_OPENAI"

# –î–ª—è Windows (PowerShell)
$env:GEMINI_API_KEY="–í–ê–®_–ö–õ–Æ–ß_GOOGLE_GEMINI"
$env:OPENAI_API_KEY="–í–ê–®_–ö–õ–Æ–ß_OPENAI"
```

**–í–∞–∂–Ω–æ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–ª—é—á–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ, –∏–∑ –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã.

### 4. –ó–∞–ø—É—Å–∫ –ê–≥–µ–Ω—Ç–æ–≤

–ö–∞–∂–¥—ã–π –∞–≥–µ–Ω—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å. –û—Ç–∫—Ä–æ–π—Ç–µ **—Ç—Ä–∏ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–∫–Ω–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞**.

#### –¢–µ—Ä–º–∏–Ω–∞–ª 1: –ó–∞–ø—É—Å–∫ PydanticAI Agent

```bash
python pydantic_ai_agent.py
```
*(–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: INFO: Started server process [xxxx]...)*

#### –¢–µ—Ä–º–∏–Ω–∞–ª 2: –ó–∞–ø—É—Å–∫ LangChain Agent

```bash
python langchain_agent.py
```
*(–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥: INFO: Started server process [xxxx]...)*

#### –¢–µ—Ä–º–∏–Ω–∞–ª 3: –ó–∞–ø—É—Å–∫ –ö–ª–∏–µ–Ω—Ç–∞ –¥–ª—è –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏—è –§–ª–æ—É

```bash
python client.py
```
*(–í—ã —É–≤–∏–¥–∏—Ç–µ –ª–æ–≥–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏, –∞ –∑–∞—Ç–µ–º –∫–æ–Ω–µ—á–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç LangChain –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–±–æ–∏–º–∏ –∞–≥–µ–Ω—Ç–∞–º–∏.)*

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ models.py                   # Pydantic-–º–æ–¥–µ–ª–∏ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏.
‚îú‚îÄ‚îÄ langchain_agent.py          # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è LangChain –∞–≥–µ–Ω—Ç–∞ (–ø–æ—Ä—Ç 8000), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Gemini.
‚îú‚îÄ‚îÄ pydantic_ai_agent.py        # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è PydanticAI –∞–≥–µ–Ω—Ç–∞ (–ø–æ—Ä—Ç 8001), –∏—Å–ø–æ–ª—å–∑—É–µ—Ç OpenAI –∏ TextBlob.
‚îî‚îÄ‚îÄ client.py                   # –°–∫—Ä–∏–ø—Ç –¥–ª—è –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤—Å–µ–≥–æ —Ñ–ª–æ—É.
```

## üìà –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è

*   **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –û—á–µ—Ä–µ–¥–∏ –°–æ–æ–±—â–µ–Ω–∏–π:** –î–ª—è –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–≥–æ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ–≥–æ A2A –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ä–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±—Ä–æ–∫–µ—Ä–æ–≤ —Å–æ–æ–±—â–µ–Ω–∏–π (RabbitMQ, Kafka, Redis Pub/Sub).
*   **–û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫:** –£–ª—É—á—à–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∏ retries.
*   **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è/–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:** –ó–∞—â–∏—Ç–∞ API-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –º–µ–∂–¥—É –∞–≥–µ–Ω—Ç–∞–º–∏.
*   **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ë–æ–ª–µ–µ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞.
*   **–û–±—â–∏–π –ë—Ä–æ–∫–µ—Ä –°–æ—Å—Ç–æ—è–Ω–∏–π:** –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö —Ñ–ª–æ—É, –≤–æ–∑–º–æ–∂–Ω–æ, –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π.
*   **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:** –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å Streamlit –∏–ª–∏ Gradio) –¥–ª—è –±–æ–ª–µ–µ —É–¥–æ–±–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π.
*   **Dockerization:** –£–ø–∞–∫–æ–≤–∫–∞ –∫–∞–∂–¥–æ–≥–æ –∞–≥–µ–Ω—Ç–∞ –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è.